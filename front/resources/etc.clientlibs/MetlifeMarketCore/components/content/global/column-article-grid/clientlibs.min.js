var ColumnArticleGridModule = (function () {
  function n(a) {
    var b = a.find(".column-article-grid__carousel-container"),
      f = b.find(".column-article-grid__carousel-item"),
      k = b.width(),
      e = b.find(".slick-list").width(),
      d = f.index(b.find(".slick-current"));
    f.each(function (a) {
      $(this).css("max-width", e + "px");
      var b = $(this).outerWidth();
      a >= d
        ? (k >= b / 2
            ? ($(this).attr("aria-hidden", "false"),
              $(this).attr("tabindex", "0"))
            : ($(this).attr("aria-hidden", "true"),
              $(this).attr("tabindex", "-1"),
              $(this).blur()),
          (k -= b))
        : ($(this).attr("aria-hidden", "true"),
          $(this).attr("tabindex", "-1"),
          $(this).blur());
    });
    a.find(".carousel-control").removeAttr("style");
    a.find(".carousel-control").removeClass("d-none");
  }
  function q(a, b, f) {
    a.find(".content-changed").text("");
    var k = a.find(".content-changed").data("text"),
      e = a
        .find("[data-fetch-article-list-url]")
        .attr("data-fetch-article-list-url"),
      d = a
        .find("[data-fetch-article-config]")
        .attr("data-fetch-article-config"),
      g;
    0 < a.find("[data-fetch-article-config-taxonomy]").length &&
      (g = a
        .find("[data-fetch-article-config-taxonomy]")
        .attr("data-fetch-article-config-taxonomy"));
    var l;
    0 < a.find("[data-fetch-article-config-tags]").length &&
      (l = a
        .find("[data-fetch-article-config-tags]")
        .attr("data-fetch-article-config-tags"));
    var c = {};
    c.market = a.find("[data-market]").attr("data-market");
    c.articleDataConfig = d ? d : "";
    "fetch-new" === f
      ? ((c.startArticleNum = "0"),
        "mobile" !== UtilityModule.getViewport()
          ? (c.endArticleNum = "15")
          : (c.endArticleNum = "7"))
      : "fetch-more" === f &&
        ((c.startArticleNum = a
          .find("[data-fetch-article-start-num]")
          .attr("data-fetch-article-start-num")),
        (c.endArticleNum = a
          .find("[data-fetch-article-end-num]")
          .attr("data-fetch-article-end-num")));
    0 < a.find("[data-fetch-article-config-taxonomy]").length &&
      (c.articleDataTaxonomy = g ? g : "");
    0 < a.find("[data-fetch-article-config-tags]").length &&
      (c.articleDataTags = l ? l : "");
    0 < b.length &&
      !b.hasClass("filter-all") &&
      b[0].hasAttribute("data-tab-tags") &&
      (c.articleDataFilter = b.attr("data-tab-tags"));
    $.ajax({
      url: e,
      type: "GET",
      data: c,
      dataType: "json",
      async: !0,
      success: function (c) {
        var d = "",
          h = "";
        if (0 < c.articles.length) {
          if (
            0 < b.length &&
            !b.hasClass("filter-all") &&
            b[0].hasAttribute("data-tab-link")
          ) {
            var g = b.attr("data-tab-cta-text"),
              e = b.attr("data-tab-link"),
              l = b.attr("data-tab-target");
            h =
              h +
              '\x3cdiv class\x3d"col-12 article-list-section-cta"\x3e' +
              ('\x3ca href\x3d"' + e + '" target\x3d"' + l + '"\x3e') +
              ("\x3cspan\x3e" + g + "\x3c/span\x3e") +
              '\x3csvg class\x3d"icon icon-arrow-right2" aria-hidden\x3d"true" tabindex\x3d"-1" focusable\x3d"false"\x3e\x3cuse xlink:href\x3d"/static/images/icons-metlife.svg#icon-arrow-right2"\x3e\x3c/use\x3e\x3c/svg\x3e';
            h += "\x3c/a\x3e";
            h += "\x3c/div\x3e";
          }
          $.each(c.articles, function (b, c) {
            d += '\x3cdiv class\x3d"col-12 col-sm-4 article-list-item"\x3e';
            d +=
              '\x3cdiv class\x3d"article-list-item-border d-none d-sm-block"\x3e\x3c/div\x3e';
            d += "\x3cdiv class\x3d'article-list-section-content' \x3e";
            d +=
              '\x3cdiv class\x3d"article-list-item-bg"\x3e\x3cdiv class\x3d"article-list-item-bg-container"\x3e\x3cdiv class\x3d"bg" style\x3d"background-image: url(\'' +
              c.imageThumbnail +
              "')\"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";
            d +=
              "\x3ca href\x3d'" +
              c.path +
              "' target\x3d\"" +
              a.attr("data-target-dynamic") +
              '"\x3e\x3cdiv class\x3d"article-list-item-headline"\x3e' +
              c.headlineTitle +
              "\x3c/div\x3e\x3c/a\x3e";
            d +=
              '\x3cdiv class\x3d"article-list-item-publishedDate"\x3e' +
              c.publishedDate +
              "\x3c/div\x3e";
            d += "\x3c/div\x3e\x3c/div\x3e";
          });
        }
        g = a.find(".article-cta-wrapper");
        e = a.find(".article-list-wrapper");
        "fetch-new" === f &&
          (g.html(""), e.html(""), "" !== h && g.append($(h)));
        e.append($(d));
        a.find(".article-list-item").removeAttr("aria-hidden");
        a.find(".article-list-item a").removeAttr("tabindex");
        "fetch-new" === f
          ? "mobile" !== UtilityModule.getViewport()
            ? 15 < c.articleSize
              ? (a.find(".show-more-section").removeClass("d-none"),
                a
                  .find("[data-fetch-article-start-num]")
                  .attr("data-fetch-article-start-num", "15"),
                a
                  .find("[data-fetch-article-end-num]")
                  .attr("data-fetch-article-end-num", "6"),
                p(a))
              : (a.find(".show-more-section").addClass("d-none"),
                a
                  .find("[data-fetch-article-start-num]")
                  .attr("data-fetch-article-start-num", "0"),
                a
                  .find("[data-fetch-article-end-num]")
                  .attr("data-fetch-article-end-num", "15"))
            : 7 < c.articleSize
            ? (a.find(".show-more-section").removeClass("d-none"),
              a
                .find("[data-fetch-article-start-num]")
                .attr("data-fetch-article-start-num", "7"),
              a
                .find("[data-fetch-article-end-num]")
                .attr("data-fetch-article-end-num", "6"),
              p(a))
            : (a.find(".show-more-section").addClass("d-none"),
              a
                .find("[data-fetch-article-start-num]")
                .attr("data-fetch-article-start-num", "0"),
              a
                .find("[data-fetch-article-end-num]")
                .attr("data-fetch-article-end-num", "7"))
          : "fetch-more" === f &&
            (c.articleSize >
            parseInt(
              a
                .find("[data-fetch-article-start-num]")
                .attr("data-fetch-article-start-num")
            ) +
              6
              ? (a.find(".show-more-section").removeClass("d-none"),
                (c =
                  parseInt(
                    a
                      .find("[data-fetch-article-start-num]")
                      .attr("data-fetch-article-start-num")
                  ) + 6),
                (h = a
                  .find("[data-fetch-article-end-num]")
                  .attr("data-fetch-article-end-num")),
                a
                  .find("[data-fetch-article-start-num]")
                  .attr("data-fetch-article-start-num", c),
                a
                  .find("[data-fetch-article-end-num]")
                  .attr("data-fetch-article-end-num", h),
                p(a))
              : a.find(".show-more-section").addClass("d-none"));
        a.find(".content-changed").text(k);
        setTimeout(function () {
          a.find(".content-changed").text("");
        }, 1500);
      },
      error: function () {
        console.log("Error while fetching contact list data");
      },
    });
  }
  function p(a) {
    if (0 === a.find(".show-more-section.d-none").length) {
      var b = a.find(".article-list-item").length;
      a.find(".article-list-item").removeAttr("aria-hidden");
      a.find(".article-list-item a").removeAttr("tabindex");
      "mobile" === UtilityModule.getViewport()
        ? (a
            .find(".article-list-item:nth-last-child(1)")
            .attr("aria-hidden", "true"),
          a
            .find(".article-list-item:nth-last-child(1) a")
            .attr("tabindex", "-1"))
        : 0 === b % 3
        ? (a
            .find(".article-list-item:nth-last-child(1)")
            .attr("aria-hidden", "true"),
          a
            .find(".article-list-item:nth-last-child(2)")
            .attr("aria-hidden", "true"),
          a
            .find(".article-list-item:nth-last-child(3)")
            .attr("aria-hidden", "true"),
          a
            .find(".article-list-item:nth-last-child(1) a")
            .attr("tabindex", "-1"),
          a
            .find(".article-list-item:nth-last-child(2) a")
            .attr("tabindex", "-1"),
          a
            .find(".article-list-item:nth-last-child(3) a")
            .attr("tabindex", "-1"))
        : 2 === b % 3
        ? (a
            .find(".article-list-item:nth-last-child(1)")
            .attr("aria-hidden", "true"),
          a
            .find(".article-list-item:nth-last-child(2)")
            .attr("aria-hidden", "true"),
          a
            .find(".article-list-item:nth-last-child(1) a")
            .attr("tabindex", "-1"),
          a
            .find(".article-list-item:nth-last-child(2) a")
            .attr("tabindex", "-1"))
        : 1 === b % 3 &&
          (a
            .find(".article-list-item:nth-last-child(1)")
            .attr("aria-hidden", "true"),
          a
            .find(".article-list-item:nth-last-child(1) a")
            .attr("tabindex", "-1"));
    }
  }
  var m = $(".column-article-grid.component");
  return {
    init: function () {
      $(window).on("load", function () {
        m.each(function () {
          var a = $(this),
            b = a.find(".filter-topic.filter-all");
          q(a, b, "fetch-new");
        });
      });
      $(window).on("resize", function () {
        m.each(function () {
          var a = $(this);
          p(a);
        });
      });
      $(window).on("load resize", function () {
        m.each(function () {
          var a = $(this),
            b = a.find(".column-article-grid__carousel-container"),
            f = a.find(".column-article-grid__carousel-item"),
            k = a.find(".js-leftClick"),
            e = a.find(".js-rightClick");
          b.on("init", function (b, d) {
            n(a);
          });
          b.on("afterChange", function (b, d, c, e) {
            n(a);
          });
          b.on("destroy", function (a, d) {
            b.closest(".topic-tab-section")
              .find(".carousel-control")
              .addClass("d-none");
            b.closest(".topic-tab-section")
              .find(".carousel-control")
              .attr("aria-hidden", "true");
            b.find(".column-article-grid__carousel-item").attr("tabindex", "");
          });
          var d = 0;
          f.each(function (a) {
            $(this).hasClass("slick-cloned") || (d += $(this).outerWidth());
          });
          "carousel" === a.data("filter-design")
            ? d > b.outerWidth() - 60
              ? (b.hasClass("slick-initialized") ||
                  b.slick({
                    mobileFirst: !0,
                    accessibility: !1,
                    infinite: !0,
                    dots: !1,
                    speed: 500,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    arrows: !0,
                    variableWidth: !0,
                    prevArrow: k,
                    nextArrow: e,
                    centerMode: !1,
                  }),
                n(a))
              : b.hasClass("slick-initialized") && b.slick("destroy")
            : "mobile" === UtilityModule.getViewport() &&
              (d > b.width() - 60
                ? (b.hasClass("slick-initialized") ||
                    b.slick({
                      mobileFirst: !0,
                      accessibility: !1,
                      infinite: !0,
                      dots: !1,
                      speed: 500,
                      slidesToShow: 1,
                      slidesToScroll: 1,
                      arrows: !0,
                      variableWidth: !0,
                      prevArrow: k,
                      nextArrow: e,
                      centerMode: !1,
                      responsive: [{ breakpoint: 767, settings: "unslick" }],
                    }),
                  n(a))
                : b.hasClass("slick-initialized") && b.slick("destroy"));
        });
      });
      m.find(".filter-topic")
        .on("click", function () {
          var a = $(this).closest(".column-article-grid.component");
          a.find(".article-grid-topic-container .filter-topic").removeClass(
            "current"
          );
          a.find(".article-grid-topic-container .filter-topic").attr(
            "aria-pressed",
            "false"
          );
          $(this).closest(".filter-topic").addClass("current");
          $(this).attr("aria-pressed", "true");
          var b = $(this).closest(".filter-topic");
          q(a, b, "fetch-new");
        })
        .on("keydown", function (a) {
          if (13 === a.keyCode || 32 === a.keyCode)
            a.preventDefault(), $(this)[0].click();
        });
      m.find(".show-more-button")
        .on("click", function () {
          var a = $(this).closest(".column-article-grid.component"),
            b = a.find(".filter-topic.current");
          q(a, b, "fetch-more");
        })
        .on("keydown", function (a) {
          if (13 === a.keyCode || 32 === a.keyCode)
            a.preventDefault(), $(this)[0].click();
        });
      $(document)
        .on("click", ".article-list-item a", function () {
          var a = $(this)
              .closest(".column-article-grid.component")
              .find(".article-grid-title h2")
              .text()
              .trim(),
            b = $(this).find(".article-list-item-headline").text().trim();
          AnalyticsModule.linkClick(a, "3 Column Article Grid - Article", b);
        })
        .on("keydown", ".article-list-item a", function (a) {
          if (13 === a.keyCode || 32 === a.keyCode)
            a.preventDefault(), $(this)[0].click();
        });
      $(document)
        .on("click", ".article-list-section-cta a", function () {
          var a = $(this)
              .closest(".column-article-grid.component")
              .find(".article-grid-title h2")
              .text()
              .trim(),
            b = $(this).text().trim();
          AnalyticsModule.linkClick(a, "3 Column Article Grid - CTA", b);
        })
        .on("keydown", ".article-list-section-cta a", function (a) {
          if (13 === a.keyCode || 32 === a.keyCode)
            a.preventDefault(), $(this)[0].click();
        });
    },
  };
})();
ColumnArticleGridModule.init();
